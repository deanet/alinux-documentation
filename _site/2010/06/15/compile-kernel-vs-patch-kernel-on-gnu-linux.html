<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta http-equiv="Content-Language" content="en"/>
    <title>Compile Kernel VS Patch Kernel on Gnu/Linux</title>
    <link rel="stylesheet" href="/style.css" type="text/css" media="screen"/>
    <link rel="stylesheet" href="/syntax.css" type="text/css" media="screen"/>
</head>

<script type="text/javascript">
        var disqus_awesome = ; 
        var disqus_developer = ;
</script>    

<body>
    <div class="outercolumn">
        <div class="topbar">
            <a href="/index.html">Home</a> - <a href="/archives/index.html">archive</a>
        </div>

        <div class="column">
            <div class="content">
                

<div class="title">
    Compile Kernel VS Patch Kernel on Gnu/Linux
</div>

<div class="date">
<!--    

    published: 15 Jun 2010,
    in category: <a href="/archives/kernelpatch.html">kernelpatch</a>
-->
    in category: 
<a rel="tag" href="/archives/kernel.html">kernel</a>, 

<a rel="tag" href="/archives/patch.html">patch</a>, 



</div>

<div class="innercontent">
    <p>2 years ago first time i&#8217;m playing with compile kernel, no documented of the one as well. And some months ago i&#8217;ve been stuck with bluetooth device. Since i&#8217;ve upgrade my kernel Slackware to be 2.6.33, bluetooth device cannot scaning device correctly. Then i try to rollback with old kernel, bom ! .. scanning succesfuly results of other bluetooth device. Now, i&#8217;ve two option: compile same kernel again and enable hci bluetooth driver, or compile with highest kernel using source or patching kernel to get highest kernel version :).</p>

<h2 id='compile_kernel'>Compile Kernel.</h2>

<p>Upgrade kernel via compail kernel used when you need new <code>modules</code> of hardware which can&#8217;t detect on your current kernel. So, to upgrade kernel via compail kernel, you just get new version kernel, compail the module kernel, and reboot. One thing when you reboot and you got <code>kernel panic</code>, you could rollback using old kernel backup.</p>

<h2 id='patch_kernel'>Patch Kernel</h2>

<p>Patch kernel used when you found bug of your module as used or to upgrade your current kernel into highest kernel. Best practice patching kernel needed which you don&#8217;t download all of source kernel to update your version kernel or keep update of kernel bugs. See difference of patch release bug on changelog file.</p>

<p>on with conditions, when you need upgrade kernel, you must choose efective option. an example:</p>

<ol>
<li>My current kernel is <code>2.6.29.6</code></li>

<li>I want to upgrading kernel into highest kernel ( example <code>2.6.35-rc3</code>)</li>

<li>I&#8217;ve source kernel <code>2.6.34</code> as before.</li>
</ol>

<p>So, there are many ways:</p>

<ol>
<li>Get source linux kernel <code>2.6.35-rc3</code>, and compile it.</li>

<li>Get patch file <code>2.6.35-rc3</code> and apply on source kernel <code>2.6.34</code>, and compile it.</li>

<li>Patch source current kernel using:</li>
</ol>

<ul>
<li><code>patch file 2.6.29.6</code></li>

<li>then using <code>patch file 2.6.30</code></li>

<li><code>patch file 2.6.31</code></li>

<li><code>patch file 2.6.32</code></li>

<li><code>patch file 2.6.33</code></li>

<li><code>patch file 2.6.34</code></li>

<li><code>patch file 2.6.35-rc3</code></li>
</ul>

<p>So, because i&#8217;ve source kernel <code>2.6.34</code>, i&#8217;m just only need patch <code>2.6.35-rc3</code>:</p>

<p>before:</p>
<div class='highlight'><pre><code class='bash'>root@darkstar:/usr/src/linux# uname -a
Linux darkstar 2.6.29.6-smp <span class='c'>#2 SMP Mon Aug 17 00:52:54 CDT 2009 i686 Intel(R) Core(TM)2 Duo CPU     T7100  @ 1.80GHz GenuineIntel</span>
GNU/Linux
root@darkstar:/usr/src/linux#
</code></pre>
</div>
<p>after:</p>
<div class='highlight'><pre><code class='bash'>root@darkstar:/usr/src/linux# uname -a
Linux ajisaka 2.6.35-rc3rajab <span class='c'>#2 SMP PREEMPT Sun Jun 13 22:08:59 WIT 2010 i686 Intel(R) Core(TM)2 Duo CPU     T7100  @ 1.80GHz</span>
GenuineIntel GNU/Linux
root@darkstar:/usr/src/linux# 
</code></pre>
</div>
<h2 id='update'>update</h2>

<p><code>19 Juni 2010</code></p>

<h2 id='citsit_step_compail_kernel'>citsit step compail kernel</h2>

<ul>
<li><code>make dep</code></li>

<li><code>make clean</code></li>

<li><code>make menuconfig</code></li>

<li><code>make</code></li>

<li><code>make bzImage</code></li>

<li><code>make modules</code></li>

<li><code>make modules_install</code></li>

<li><code>make install</code></li>
</ul>

<p>cause i&#8217;ve found bug of <code>prtscr</code> and <code>pause break</code> keys which make <code>kernel panic</code> :))</p>

<h1 id='your_own_risk__please_dont_use_rcrelease_candidat_version_unless_you_know_what_are_u_doing'>Your own risk &amp;&amp; please dont use rc(release candidat) version unless you know what are u doing</h1>

<p>hereis logfile</p>
<div class='highlight'><pre><code class='bash'>Jun 17 21:03:45 ajisaka kernel: SysRq : HELP : loglevel<span class='o'>(</span>0-9<span class='o'>)</span> reBoot Crash terminate-all-tasks<span class='o'>(</span>E<span class='o'>)</span> memory-full-oom-kill<span class='o'>(</span>F<span class='o'>)</span> <span class='nb'>kill</span>-all-tasks<span class='o'>(</span>I<span class='o'>)</span> thaw-filesystems<span class='o'>(</span>J
<span class='o'>)</span> saK show-backtrace-all-active-cpus<span class='o'>(</span>L<span class='o'>)</span> show-memory-usage<span class='o'>(</span>M<span class='o'>)</span> nice-all-RT-tasks<span class='o'>(</span>N<span class='o'>)</span> powerOff show-registers<span class='o'>(</span>P<span class='o'>)</span> show-all-timers<span class='o'>(</span>Q<span class='o'>)</span> unRaw Sync show-task-states<span class='o'>(</span>T
<span class='o'>)</span> Unmount show-blocked-tasks<span class='o'>(</span>W<span class='o'>)</span>
</code></pre>
</div>
<p>now, i must downgrade kernel, but i lazy boy .. ;p i was using travelmate 6292 running on slackware with <a href='/files/config' target='_new'>custom config kernel</a>.</p>

<p>semoga bermanfaat :)</p>
</div>



<div id="disqus_thread"></div>

<script type="text/javascript" src="http://disqus.com/forums/buildsystem/embed.js">
</script>

<noscript>
    <p> <a href="http://nebansnotebook.disqus.com/?url=ref">View the discussion thread. </a> </p>
</noscript>



<div class="prevnext">
    
        <div class="prev">
            &laquo; <a href="/2010/05/26/server-was-moved-and-say-goodbye-to-wordpress.html"> Server was moved, and say goodbye to Wordpress </a>
        </div>
    

    
        <div class="next">
            <a href="/2010/06/23/mengatasi-no-public-key-available-di-apt-debian.html"> Mengatasi no public key available di apt debian </a> &raquo;
        </div>
    
</div>




            </div>
            
<div class="footer">
   <center>
	<small>alinux.web.id, established since 2007, hosted by <a target="_new" href="http://tor.hu">tor.hu</a>, powered by <a target="_new" href="http://www.vim.org">vim</a> and <a target="_new" href="http://jekyllrb.com">jekyll</a><br/>
<a target="_new" href="https://github.com/deanet/alinux-documentation">source</a>
</small>
	</center>
</div>

            <div class="pageend"></div>
        </div>
    </div>
</body>
</html>

