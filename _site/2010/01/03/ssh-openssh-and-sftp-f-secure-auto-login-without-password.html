<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>SSH (OpenSSH) and SFTP (F-Secure) auto login without password &laquo; alinux.web.id</title>
	<meta name="author" content="deanet">
	<link href="atom.xml" rel="alternate" title="build system from God's systems" type="application/atom+xml" />
	<link rel="stylesheet" href="/css/site.css" type="text/css" media="screen, projection" />
	<link rel="stylesheet" href="/css/syntax.css" type="text/css" />
	<meta name="viewport" content="width=850" />
	<link rel="stylesheet" media="screen and (max-device-width: 480px)" href="/css/iphone.css" type="text/css" />

<script type="text/javascript" src="http://use.typekit.com/aoe6dic.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12495571-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<script type="text/javascript">
        var disqus_awesome = true; 
        var disqus_developer = true;
</script>    
</head>

<body>
<div id="container">
	<div id="header">
		<div id="logo">
	<a class="site" href="/index.html">home</a>
</div>
<div id="navbar">
	<a class="site" href="/atom.xml">rss</a>
</div>

	</div>
	<div id="page">
		<div id="content">
		<div id="post" class="post">
	<span class="title">SSH (OpenSSH) and SFTP (F-Secure) auto login without password</span><br />
	<span class="date">Jan 03 2010</span><br />
	<span class="content"><p>Tutor ini intiny gimna cara nya auto login dengan menggunakan <code>SSH</code> memakai <code>OpenSSH</code> dan <code>SFTP</code> memakai <code>F-Secure</code>.</p>

<h2 id='untuk_ssh'>untuk SSH:</h2>

<h4 id='buat_public_key_di_client_server'>Buat Public Key di Client Server</h4>

<h4 id='buat_public_key_di_client_lalu_masukkan_ke__main_server'>Buat Public Key di Client lalu masukkan ke <code>authorized_keys</code> Main Server.</h4>

<p>Setup di Client Monitoring server:</p>
<div class='highlight'><pre>deanet@deanet:~/tmp<span class='nv'>$ </span>ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key <span class='o'>(</span>/home/deanet/.ssh/id_rsa<span class='o'>)</span>: f7
Enter passphrase <span class='o'>(</span>empty <span class='k'>for </span>no passphrase<span class='o'>)</span>: <span class='s2'>&quot;ENTER&quot;</span>;
Enter same passphrase again: <span class='s2'>&quot;ENTER&quot;</span>;
Your identification has been saved in f7.
Your public key has been saved in f7.pub.
The key fingerprint is:
c1:7d:58:40:0b:77:6b:d8:03:b2:d6:11:89:dd:f1:a7 deanet@deanet
</pre>
</div>
<p>Lalu Kopi ke Main Server</p>
<div class='highlight'><pre>deanet@deanet:~/tmp<span class='nv'>$ </span>scp f7.pub 192.168.1.7:/home/deanet
Password:f7.pub                                        100%  395     0.4KB/s   00:00
</pre>
</div>
<p>Setup di Main Server:</p>

<p>Login lalu jalankan:</p>
<div class='highlight'><pre>cat f7.pub &gt; .ssh/authorized_keys
</pre>
</div>
<p>test Apakah sudah jalan dengan baik:</p>
<div class='highlight'><pre>deanet@deanet:~/tmp<span class='nv'>$ </span>ssh -i f7 192.168.1.2 <span class='nb'>echo test</span>
</pre>
</div>
<p>jika berhasil maka akan keluar kata test &#8230;</p>

<h2 id='ok_untuk_sftp'>ok, untuk SFTP</h2>

<p>Untuk <code>SFTP</code>, kenapa sayah mengikutsertakan <code>SFTP</code> ??? padahal <code>sftp</code> sendiri digunakan dilingkungan windo$m, sementara ini adalh blog linux wwkwkwkw&#8230;. Karena pada kenyataannya sedikit sekali dokumentasi di google tentang auto login dengan <code>SFTP</code> memakai <code>F-Secure</code> yg jalan di wedu$. Dan konfigurasi auto login dengan public key nya pun tidak semudah yang dibayangkan, karena dalam implementation nya ternyata ada sedikit perbedaan antara chipper rsa yg dibikin oleh open ssh client dengan produk dari <code>F-Secure</code>..</p>

<p>Okeee&#8230;</p>

<p>Jadi untuk <code>SFTP</code> sebenernya masalahnya gini:</p>

<ol>
<li>Ada mesin <code>windo$</code> yg terinstall <code>F-Secure</code>, <code>SSH</code> dimatikan, dan yg hidup hanya <code>SFTP</code> saja.</li>

<li>Sudah bikin public key lalu dikonfigure ke mesin wedus tapi tetep aj failed authorization :( Dan solusinya:</li>
</ol>

<p><div class='highlight'><pre><span class='o'>[</span>deanet@some-host ~<span class='o'>]</span><span class='nv'>$ </span>ssh-keygen -b 1024 -t rsa -f mykey
Generating public/private rsa key pair.
Enter passphrase <span class='o'>(</span>empty <span class='k'>for </span>no passphrase<span class='o'>)</span>:
&lt;ENTER SAJA&gt;
Enter same passphrase again:
&lt;ENTER SAJA&gt;
Your identification has been saved in mykey.
Your public key has been saved in mykey.pub.
The key fingerprint is:
4b:95:8c:ba:12:1c:19:0a:bb:d7:d2:29:3e:8b:ec:2f deanet@some-host.com
</pre>
</div></p>

<p>konvert ke <code>F-Secure</code> Implementation:</p>

<p><div class='highlight'><pre><span class='o'>[</span>deanet@some-host ~<span class='o'>]</span><span class='nv'>$ </span>ssh-keygen -e -f mykey.pub &gt; mykey-secsh.pub
<span class='o'>[</span>deanet@some-host ~<span class='o'>]</span><span class='nv'>$ </span>ls
mykey  mykey.pub  mykey-secsh.pub
<span class='o'>[</span>deanet@some-host ~<span class='o'>]</span><span class='nv'>$ </span>mkdir .sh
<span class='o'>[</span>deanet@some-host ~<span class='o'>]</span><span class='nv'>$ </span>mv .sh .ssh
<span class='o'>[</span>deanet@some-host ~<span class='o'>]</span><span class='nv'>$ </span>mv mykey* .ssh
<span class='o'>[</span>deanet@some-host ~<span class='o'>]</span><span class='nv'>$ </span>ls
<span class='o'>[</span>deanet@some-host ~<span class='o'>]</span><span class='nv'>$ </span><span class='nb'>cd</span> .ssh
<span class='o'>[</span>deanet@some-host .ssh<span class='o'>]</span><span class='nv'>$ </span>ls
mykey  mykey.pub  mykey-secsh.pub
</pre>
</div></p>

<p>rename <code>mykesy</code> to <code>id_dsa</code></p>

<p><div class='highlight'><pre><span class='o'>[</span>deanet@some-host .ssh<span class='o'>]</span><span class='nv'>$ </span>mv mykey id_dsa
</pre>
</div></p>

<p>lalu testing:</p>

<p><div class='highlight'><pre><span class='o'>[</span>deanet@some-host .ssh<span class='o'>]</span><span class='nv'>$ </span>sftp -o <span class='nv'>Port</span><span class='o'>=</span>9991 -v deanet@some-ip
Connecting to some-ip...
OpenSSH_4.3p2, OpenSSL 0.9.8e-fips-rhel5 01 Jul 2008
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options <span class='k'>for</span> *
debug1: Connecting to some-ip <span class='o'>[</span>some-ip<span class='o'>]</span> port 9991.
debug1: Connection established.
debug1: identity file /home/deanet/.ssh/id_rsa <span class='nb'>type</span> -1
debug1: identity file /home/deanet/.ssh/id_dsa <span class='nb'>type</span> -1
debug1: loaded 2 keys
debug1: Remote protocol version 2.0, remote software version 3.2.3 F-Secure SSH Windows NT Server
debug1: no match: 3.2.3 F-Secure SSH Windows NT Server
debug1: Enabling compatibility mode <span class='k'>for </span>protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_4.3
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server-&gt;client aes128-cbc hmac-md5 none
debug1: kex: client-&gt;server aes128-cbc hmac-md5 none
debug1: sending SSH2_MSG_KEXDH_INIT
debug1: expecting SSH2_MSG_KEXDH_REPLY
The authenticity of host <span class='s1'>&#39;some-ip (some-ip)&#39;</span> can<span class='s1'>&#39;t be established.</span>
<span class='s1'>DSA key fingerprint is 50:b9:e9:1c:a9:a7:11:ce:5d:ee:6e:e9:88:cc:99:57.</span>
<span class='s1'>Are you sure you want to continue connecting (yes/no)? yes</span>
<span class='s1'>Warning: Permanently added &#39;</span>some-ip<span class='err'>&#39;</span> <span class='o'>(</span>DSA<span class='o'>)</span> to the list of known hosts.
debug1: ssh_dss_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can <span class='k'>continue</span>: publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /home/deanet/.ssh/id_rsa
debug1: Trying private key: /home/deanet/.ssh/id_dsa
debug1: <span class='nb'>read </span>PEM private key <span class='k'>done</span>: <span class='nb'>type </span>RSA
debug1: Authentication succeeded <span class='o'>(</span>publickey<span class='o'>)</span>.
debug1: channel 0: new <span class='o'>[</span>client-session<span class='o'>]</span>
debug1: Entering interactive session.
debug1: Sending environment.
debug1: Sending env <span class='nv'>LANG</span> <span class='o'>=</span> en_US.UTF-8
debug1: Sending subsystem: sftp
sftp&gt; <span class='nb'>exit</span>
debug1: client_input_channel_req: channel 0 rtype <span class='nb'>exit</span>-status reply 0
debug1: channel 0: free: client-session, nchannels 1
debug1: fd 0 clearing O_NONBLOCK
debug1: Transferred: stdin 0, stdout 0, stderr 0 bytes in 4.3 seconds
debug1: Bytes per second: stdin 0.0, stdout 0.0, stderr 0.0
debug1: Exit status 0
</pre>
</div></p>

<p>ok, done&#8230; ;) semoga bermanfaat</p>

<p>Reference:</p>

<ol>
<li><a href='http://www.derkeiler.com/Mailing-Lists/securityfocus/Secure_Shell/2004-11/0062.html'>http://www.derkeiler.com/Mailing-Lists/securityfocus/Secure_Shell/2004-11/0062.html</a></li>

<li><a href='http://ngadimin.com/2009/06/16/login-ssh-tanpa-password/'>http://ngadimin.com/2009/06/16/login-ssh-tanpa-password/</a></li>

<li><a href='http://www.fixya.com/support/t21364-f_secure_ssh_server_authentications_over'>http://www.fixya.com/support/t21364-f_secure_ssh_server_authentications_over</a></li>
</ol></span>
</div>
<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>Jul 14 2010</span> &raquo; <a href="/2010/07/14/upgrade-clamav-di-debian-etch-dengan-backports.html">Upgrade ClamAV di Debian Etch dengan backports</a></li>
    
      <li><span>Jun 30 2010</span> &raquo; <a href="/2010/06/30/installasi-qmail-vpopmail-clamav-simscan-dengan-spamassasin-di-debian-etch.html">Installasi Qmail, Vpopmail, ClamAV, Simscan, Spamassasin di Debian Etch</a></li>
    
      <li><span>Jun 23 2010</span> &raquo; <a href="/2010/06/23/mengatasi-no-public-key-available-di-apt-debian.html">Mengatasi no public key available di apt debian</a></li>
    
  </ul>
</div>

<h3 id="archive"><a href="/archive.html">Archive</a></h3>
<br/>
<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread]
    */
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://buildsystem.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=buildsystem">comments powered by Disqus.</a></noscript>

		</div>
	</div>
	<div id="footer">
		<div id="leftcol">
maintenance and developed by <a href="http://deanet.web.id" target="_new">deanet.web.id</a>
</div>

	</div>
</div>
<script type="text/javascript">
//<![CDATA[
(function() {
	var links = document.getElementsByTagName('a');
	var query = '?';
	for(var i = 0; i < links.length; i++) {
	if(links[i].href.indexOf('#disqus_thread') >= 0) {
		query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
	}
	}
	document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/buildsystem/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>
</body>

</html>
