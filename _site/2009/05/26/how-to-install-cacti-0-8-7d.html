<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>How to install Cacti 0.8.7d &laquo; alinux.web.id</title>
	<meta name="author" content="deanet">
	<link href="atom.xml" rel="alternate" title="build system from God's systems" type="application/atom+xml" />
	<link rel="stylesheet" href="/css/site.css" type="text/css" media="screen, projection" />
	<link rel="stylesheet" href="/css/syntax.css" type="text/css" />
	<meta name="viewport" content="width=850" />
	<link rel="stylesheet" media="screen and (max-device-width: 480px)" href="/css/iphone.css" type="text/css" />

<script type="text/javascript" src="http://use.typekit.com/aoe6dic.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', '']);
	  _gaq.push(['_trackPageview']);
	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	  })();
	</script>

<script type="text/javascript">
        var disqus_awesome = true; 
        var disqus_developer = true;
</script>    
</head>

<body>
<div id="container">
	<div id="header">
		<div id="logo">
	<a class="site" href="/index.html">home</a>
</div>
<div id="navbar">
	<a class="site" href="/atom.xml">rss</a>
</div>

	</div>
	<div id="page">
		<div id="content">
		<div id="post" class="post">
	<span class="title">How to install Cacti 0.8.7d</span><br />
	<span class="date">May 26 2009</span><br />
	<span class="content"><h2 id='about_cacti'>About Cacti</h2>

<p>Cacti is a complete network graphing solution designed to harness the power of RRDTool&#8217;s data storage and graphing functionality. Cacti provides a fast poller, advanced graph templating, multiple data acquisition methods, and user management features out of the box. All of this is wrapped in an intuitive, easy to use interface that makes sense for LAN-sized installations up to complex networks with hundreds of devices.</p>

<p>so, let&#8217;s do it : On this experiment I use openSUSE 11. U can try on debian based or ubuntu. see <a href='http://open4energy.com/tutorials/virtualbox/cacti' target='_blank'>this page</a> for more info :).</p>

<h3 id='1_prepare_web_server_and_database_server'>1. Prepare web server and Database server</h3>

<p>At this point we&#8217;ll prepare web server dan database server. you can view how to install web server and database server on <a href='/2009/05/05/installasi-bind-apache2-mysql-php-dan-konfigurasi-dns-serta-virtual-host-di-opensuse.html' target='_new'>here</a> with indonesian language. But don&#8217;t worry, u can also see english version on <a href='http://tech-db.com/node/43' target='_new'>this page</a>.</p>

<p>you can check or make sure webserver(apache) and database server (mysql) installed on your machine. on open suse 11 we can check apache with command:</p>

<pre><code># rpm -qa | grep apache2</code></pre>

<p>and mysql</p>

<pre><code># rpm -qa | grep mysql</code></pre>

<h3 id='2_prepare_phpsnmp_module'>2. Prepare php-snmp module</h3>

<p>just type like this to install php5-snmp module:</p>

<pre><code># yast2 -i php5-snmp</code></pre>

<p>that automatically install:</p>

<pre><code>net-snmp-5.4.1-77.4
snmp-mibs-5.4.1-77.4
libsnmp15-5.4.1-77.4
php5-snmp-5.2.9-0.1
net-snmp-devel-5.4.1-77.4</code></pre>

<p>check with rpm -qa | grep snmp to make sure like on list. if isn&#8217;t on list, u can install step by step list module.</p>

<h3 id='3_prepare_rrdtool'>3. Prepare rrdtool</h3>

<p>at least, we&#8217;ve two way to install <code>rrdtool</code>. pls choose use binary. If rrdtool not recognized by <code>cacti</code>, u must compile rrdtool from source.</p>

<h4 id='a_use_binary_from_repositori'>a. Use binary from repositori.</h4>

<p>we can type:</p>

<pre><code># yast2 -i rrdtool</code></pre>

<p>that automatically install:</p>

<pre><code>rrdtool-1.2.27-22.1
rrdtool-devel-1.2.27-22.1</code></pre>

<p>check with rpm -qa | grep rrdtool to make sure like on list. if isn&#8217;t on list, u can install step by step list module.</p>

<h4 id='b_compile_from_source'>b. Compile from source</h4>

<pre><code># wget http://oss.oetiker.ch/rrdtool/pub/rrdtool-1.3.8.tar.gz
# tar -xzvf rrdtool-1.3.8.tar.gz;cd rrdtool-1.3.8
# ./configure &amp;&amp; make &amp;&amp; make install</code></pre>

<p><strong>NOTE</strong> Installing dependencies:</p>

<pre><code>glib-2.15.4.tar.gz
cairo-1.6.4.tar.gz
pango-1.21.1.tar.bz2</code></pre>

<p>dependencies package download recommanded from <a href='http://oss.oetiker.ch/rrdtool/pub/libs/' target='_new'>here</a></p>

<p>Get package, extract package, change to work directory and install</p>

<pre><code># aclocal
# autoheader
# autoconf
# automake
# ./configure
# make
# make install</code></pre>

<p>please see install or readme files on package for information :)</p>

<h3 id='4_installing_cacti'>4. Installing Cacti</h3>

<p>Go to the <a href='http://www.cacti.net/download_cacti.php' target='_new'>download page</a> to download cacti.</p>

<h4 id='41_put__into_directory_can_access_on_site'>4.1. Put <code>cacti-0.8.7d.tar.gz</code> into directory can access on site.</h4>

<p>example: root directory on <code>example.com</code> is <code>/srv/www/htdocs</code> . so put <code>cacti-0.8.7d.tar.gz</code> into <code>htdocs</code> directory and extract.</p>

<pre><code># tar -xzvf cacti-0.8.7d.tar.gz</code></pre>

<h4 id='42_rename_directory__to_cacti_be_simply_use_and_change_directory_to_it'>4.2. rename directory <code>cacti-0.8.7d</code> to cacti be simply use and change directory to it</h4>

<pre><code># mv cacti-0.8.7d cacti; cd cacti</code></pre>

<h4 id='43_add_group_cacti'>4.3. add group cacti</h4>

<pre><code># groupadd cacti</code></pre>

<p>and user for cacti</p>

<pre><code># useradd -g cacti cactiuser</code></pre>

<h4 id='43_change_password_for_cacti_user'>4.3. change password for cacti user</h4>

<pre><code># passwd cactiuser</code></pre>

<p>Now, Installing cacti database and make sure cacti user to have privileges</p>

<h4 id='44_create_database_cacti'>4.4. create database cacti</h4>

<pre><code># mysqladmin -u root -p create cacti</code></pre>

<h4 id='45_dump_cacti_database'>4.5. dump cacti database</h4>

<pre><code># mysql -u root -p cacti &lt; cacti.sql</code></pre>

<h4 id='46_set_privileges_cacti_database_to_cacti_user'>4.6. set privileges cacti database to cacti user</h4>

<pre><code># mysql -u root -p
mysql&gt; GRANT ALL ON cacti.* TO cactiuser@localhost IDENTIFIED BY ‘cactipassword’;
mysql&gt; flush privileges;</code></pre>

<h4 id='47_edit_configuration_configphp'>4.7. Edit Configuration config.php</h4>

<pre><code># vi include/config.php
/* make sure these values refect your actual database/host/user/password */
$database_type = “mysql”;
$database_default = “cacti”;
$database_hostname = “localhost”;
$database_username = “cactiuser”;
$database_password = “cactipassword”;
$database_port = “3306&quot;;</code></pre>

<h4 id='48_set_permission_rra_and_log_directory_to_cactiuser'>4.8. set permission rra and log directory to cactiuser</h4>

<pre><code># chown -R cactiuser rra/ log/</code></pre>

<h4 id='49_make_cron_schedule_with_crontab'>4.9. make cron schedule with crontab</h4>

<pre><code># crontab -e</code></pre>

<p>type <code>a</code> and fill like this</p>

<pre><code>*/1 * * * * /usr/bin/php /srv/www/htdocs/cacti/poller.php &gt; /dev/null 2&gt;&amp;1</code></pre>

<p>type <code>esc</code> and <code>:w</code> to write, and type <code>q</code> to quit .</p>

<h4 id='410_access_it_from_site_'>4.10. access it from site <code>example.com/cacti</code></h4>

<p>results:</p>

<p>click <code>next</code>&#160;&#187; choose <code>new install</code>&#160;&#187; choose <code>net-snmp 5.x</code> and <code>rrdtool 1.2.x</code> . i use 1.3 version. so, make sure version that&#8217;s true. and then click <code>Finish</code></p>

<p>ok, just it :) . you can access now on <code>example.com/cacti</code> . use <code>admin</code> as user and <code>admin</code> as password. How to create and manage cacti ?, you can see video on <a href='http://gregsowell.com/?p=115' target='_new'>this page</a>.</p>

<h3 id='troubleshooting'>Troubleshooting:</h3>

<h4 id='1_socket_error'>1. Socket Error</h4>

<p>get the error:</p>

<pre><code>Error
The following PHP extensions are missing:
* sockets</code></pre>

<p>make sure Configure Command on <code>phpinfo</code> have</p>

<pre><code>--enable-sockets</code></pre>

<p>if none, install <code>php5-sockets</code></p>

<pre><code># yast2 -i php5-sockets</code></pre>

<p>if it&#8217;s not resolve problem, you can recompile your php from source , googling :)</p>

<h4 id='2_graphic_not_shown__make_sure__works_as_normally'>2. Graphic not shown / Make sure <code>rrdtool</code> works as normally</h4>

<p>maybe you got error like <a href='http://forums.cacti.net/about32632.html&amp;highlight=graphic+show' target='_new'>this</a></p>

<p>make sure your <code>rrdtool</code> can generate for graphic file. and try on konsole with type:</p>

<pre><code>/usr/local/rrdtool-1.3.8/bin/rrdtool graph /tmp/cacti.png - \
--imgformat=PNG \
--start=1243236410 \
--end=1243322810 \
--title=&quot;localhost - Load Average&quot; \
--rigid \
--base=1000 \
--height=120 \
--width=500 \
--alt-autoscale-max \
--lower-limit=0 \
--units-exponent=0 \
COMMENT:&quot;From 2009/05/25 08\:26\:50 To 2009/05/26 08\:26\:50\c&quot; \
COMMENT:&quot;  \n&quot; \
--vertical-label=&quot;processes in the run queue&quot; \
--slope-mode \
--font TITLE:12: \
--font AXIS:8: \
--font LEGEND:10: \
--font UNIT:8: \
DEF:a=&quot;/srv/www/htdocs/cacti/rra/localhost_load_1min_16.rrd&quot;:load_1min:AVERAGE \
DEF:b=&quot;/srv/www/htdocs/cacti/rra/localhost_load_1min_16.rrd&quot;:load_5min:AVERAGE \
DEF:c=&quot;/srv/www/htdocs/cacti/rra/localhost_load_1min_16.rrd&quot;:load_15min:AVERAGE \
CDEF:cdefg=TIME,1243322526,GT,a,a,UN,0,a,IF,IF,TIME,1243322526,GT,b,b,UN,0,b,IF,IF,TIME,1243322526,GT,c,c,UN,0,c,IF,IF,+,+ \
AREA:a#EACC00FF:&quot;1 Minute Average&quot;  \
GPRINT:a:LAST:&quot; Current\:%8.2lf\n&quot;  \
AREA:b#EA8F00FF:&quot;5 Minute Average&quot;:STACK \
GPRINT:b:LAST:&quot; Current\:%8.2lf\n&quot;  \
AREA:c#FF0000FF:&quot;15 Minute Average&quot;:STACK \
GPRINT:c:LAST:&quot;Current\:%8.2lf\n&quot;  \
LINE1:cdefg#000000FF:&quot;\n&quot;</code></pre>

<p>that command will create file cacti.png on <code>/tmp</code> . you need modify that command where is rrd path location.</p>

<h4 id='3_make_sure_snmp_daemon_running'>3. Make sure snmp daemon running.</h4>

<p>type this to make sure snmp daemon running on your machine:</p>

<pre><code>snmpwalk -c public -v 1 localhost system</code></pre>

<p>it will results:</p>

<pre><code>SNMPv2-MIB::sysDescr.0 = STRING: Linux ddd.ssss.net 2.6.18-92.1.13.el5.028stab059.6 #1 SMP Fri Nov 14 20:22:51 MSK 2008 i686
SNMPv2-MIB::sysObjectID.0 = OID: NET-SNMP-MIB::netSnmpAgentOIDs.10
DISMAN-EVENT-MIB::sysUpTimeInstance = Timeticks: (53004148) 6 days, 3:14:01.48
SNMPv2-MIB::sysContact.0 = STRING: Sysadmin (root@localhost)
etc..</code></pre>

<h4 id='4_make_sure_enough_memory'>4. make sure enough memory</h4>

<p>type like this on konsole:</p>

<pre><code>/usr/bin/php cacti/poller.php</code></pre>

<p>if output of console results :</p>

<pre><code>Out of memory</code></pre>

<p>u must killall -9 something_daemon that running to reallocate new space of memory</p>

<h4 id='5_always_check_cacti_log_on_log_directory'>5. Always check cacti log on log directory</h4>

<p>cmiiw :)</p>

<p>Reference:</p>

<ol>
<li><a href='http://cacti.net'>cacti.net</a></li>

<li><a href='http://tech-db.com/node/24'>tech-db.com</a></li>

<li><a href='http://www.groundworkopensource.com/community/forums/viewtopic.php?f=23&amp;amp;t=1317&amp;amp;start=15'>groundworkopensource.com</a></li>

<li><a href='http://forums.cacti.net/about32632.html&amp;amp;highlight=graphic+show'>forums.cacti.net</a></li>

<li><a href='http://oss.oetiker.ch/rrdtool/doc/rrdbuild.en.html'>oss.oetiker.ch</a></li>

<li><a href='http://gregsowell.com/?p=115'>gregsowell.com</a></li>
</ol></span>
</div>
<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>Jul 14 2010</span> &raquo; <a href="/2010/07/14/upgrade-clamav-di-debian-etch-dengan-backports.html">Upgrade ClamAV di Debian Etch dengan backports</a></li>
    
      <li><span>Jun 30 2010</span> &raquo; <a href="/2010/06/30/installasi-qmail-vpopmail-clamav-simscan-dengan-spamassasin-di-debian-etch.html">Installasi Qmail, Vpopmail, ClamAV, Simscan, Spamassasin di Debian Etch</a></li>
    
      <li><span>Jun 23 2010</span> &raquo; <a href="/2010/06/23/mengatasi-no-public-key-available-di-apt-debian.html">Mengatasi no public key available di apt debian</a></li>
    
  </ul>
</div>

<h3 id="archive"><a href="/archive.html">Archive</a></h3>
<br/>
<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread]
    */
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://buildsystem.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=buildsystem">comments powered by Disqus.</a></noscript>

		</div>
	</div>
	<div id="footer">
		<div id="leftcol">
maintenance and developed by <a href="http://deanet.web.id" target="_new">deanet.web.id</a>
</div>

	</div>
</div>
<script type="text/javascript">
//<![CDATA[
(function() {
	var links = document.getElementsByTagName('a');
	var query = '?';
	for(var i = 0; i < links.length; i++) {
	if(links[i].href.indexOf('#disqus_thread') >= 0) {
		query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
	}
	}
	document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/buildsystem/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>
</body>

</html>
