<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>Installasi Postfix, Saslauthd, VM-Pop3d, dan SquirrelMail di OpenSuse &laquo; alinux.web.id</title>
	<meta name="author" content="deanet">
	<link href="atom.xml" rel="alternate" title="build system from God's systems" type="application/atom+xml" />
	<link rel="stylesheet" href="/css/site.css" type="text/css" media="screen, projection" />
	<link rel="stylesheet" href="/css/syntax.css" type="text/css" />
	<meta name="viewport" content="width=850" />
	<link rel="stylesheet" media="screen and (max-device-width: 480px)" href="/css/iphone.css" type="text/css" />

<script type="text/javascript" src="http://use.typekit.com/aoe6dic.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12495571-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<script type="text/javascript">
        var disqus_awesome = true; 
        var disqus_developer = true;
</script>    
</head>

<body>
<div id="container">
	<div id="header">
		<div id="logo">
	<a class="site" href="/index.html">home</a>
</div>
<div id="navbar">
	<a class="site" href="/atom.xml">rss</a>
</div>

	</div>
	<div id="page">
		<div id="content">
		<div id="post" class="post">
	<span class="title">Installasi Postfix, Saslauthd, VM-Pop3d, dan SquirrelMail di OpenSuse</span><br />
	<span class="date">May 19 2009</span><br />
	<span class="content"><p>Tutorial ini khusus diperuntukkan bagi seorang pemula / nubie yang ingin belajar lebih dalam mengenai segala tetek bengek sper. So, tutorial ini bagus banget utk saya pribadi :D . Tidak diperuntukkan bagi anda2 yang sudah mahir, hapal, diluar kepala (sampek lupa <em>just kidding</em>), jago, super jago tentang segala srper.:D</p>

<p>okay, apa itu postfix? saslauthd ? vm-pop3d, n squirrelmail ??</p>

<h2 id='pendahuluan'>Pendahuluan:</h2>

<p>Pernah kah terbayangkan ? gimna sih cara kerja ketika kita mengirim email dari login sampai logout ?. Bagaimna lagi kalau kita memakai email client like thunderbird or outlook ?? Hmmm &#8230; Okay, proses tersebut paling tidak dibutuhkan :</p>

<h3 id='mail_server'>Mail Server</h3>

<p>Mail Server yaitu sebuah server yang digunakan untuk menyimpan dan mengirim sebuah email. bisa diibaratkan mail server itu seperti sebuah kantor pos. Untuk mengirim sebuah email dari alamat email yang satu ke alamat email yang lain digunakan sebauh protocol (aturan) yaitu Simple Mail Transfer Protocol SMTP. Protocol SMTP telah menjadi aturan dasar yang disepakati untuk pengiriman email. Dengan demikian semua software email server pasti mendukung protokol ini. SMTP merupakan protokol yang digunakan untuk megirim email (komunikasi antar mail server), dan tidak digunakan untuk berkomunikasi dengan client. Sedangkan untuk client, digunakan protokol imap imaps pop3 pop3s.</p>

<p>Contoh Mail Server:</p>

<ul>
<li>Postfix</li>

<li>QMail</li>

<li>Exim</li>

<li>Sendmail</li>

<li>dll</li>
</ul>

<h3 id='imap__pop3'>IMAP / POP3</h3>

<p>Supaya sebuah mail server dapat di akses oleh client, dikembangkan sebuah aplikasi dimana client dapat mengakses email dari sebuah email server. <a href='http://imap.org/' target='_new'>IMAP</a> adalah sebuah aplikasi pada layer Internet protokol yang memungkinkan client untuk mengakses email yang ada di server. Selain IMAP ada juga POP3 yang fungsinya sama dengan imap, akan tetapi memiliki karakteristik yang berbeda dalam cara pengaksesan pada server.</p>
<a href='http://imap.org/' target='_new'>IMAP</a>
<p>IMAP (Internet Message Access Protocol), protokol yang memperbolehkan pengambilan email tanpa harus didownload ke email client. Contoh penggunaan IMAP yang paling sering adalah akses web mail.</p>

<p>Menurut saya pribadi: imap itu digunakan sebagai interface antara client dan server berbasis webmail. Ada banyak macam Imap server, like :</p>

<ul>
<li>UW IMAP</li>

<li>Dovecot</li>

<li>Courier IMAP</li>

<li>Cyrus IMAP</li>

<li>dll</li>
</ul>

<h3 id='pop'>POP</h3>

<p>POP (Post Office Protocol) Server, biasanya menggunakan POP3, digunakan untuk proses penyimpanan email yang nantinya akan diambil oleh email client. Biasana POP3 ada didalam Imap server. Untuk UW IMAP sama Devecot sudah ada fasilitas POP3 nya tinggal diaktifkan. Kalau Courier sama Cyrus saya belum pernah coba. Ada juga Vm-pop3 yang memang dikhususkan utk akses pop3 untuk <code>virtual mesin</code> seperti yang saya pakai dalam percobaan kali ini.</p>

<h4 id='authentication'>Authentication</h4>

<p>Proses yang terjadi waktu login sama kirim email dikirim secara plain text. Nah, untuk itu diperlukan authentication yang akan mengurusi proses tersebut. banyak juga macam2 jenis authenticationna. SASL, TLS, SSL, dll . Disini saya memakai <code>Courier-Authlib</code> dan <code>Cyrus-SASL</code> utk authenticationa, <code>vm-pop3d</code> untuk <code>POP3</code> na, <code>Postfix</code> sebagai mail serverna.</p>

<h3 id='ok_lets_go_to_installation'>Ok, lets go to installation:</h3>

<h3 id='1_install_postfix'>1. Install Postfix</h3>

<pre><code>#yast2 -i postfix</code></pre>

<h3 id='2_install_courierauthlib_dan_cyrussasl'>2. Install Courier-Authlib dan Cyrus-SASL</h3>

<pre><code>#yast2 -i courier-authlib cyrus-sasl cyrus-sasl-crammd5 cyrus-sasl-digestmd5 cyrus-sasl-gssapi cyrus-sasl-otp cyrus-sasl-plain cyrus-sasl-saslauthd</code></pre>

<h3 id='3_install_vmpop3d'>3. Install vm-pop3d</h3>

<p>unduh vm-pop3d lalu diekstrak trus di install</p>

<pre><code>#wget http://www.ibiblio.org/pub/Linux/system/mail/pop/vm-pop3d-1.1.6.tar.gz
#tar -zxvf vm-pop3d-1.1.6.tar.gz
#cd vm-pop3d-1.1.6
#./configure &amp;&amp; make &amp;&amp; make install</code></pre>

<h3 id='4_bikin_user_baru'>4. Bikin user baru</h3>

<pre><code>#yast2</code></pre>

<p>Pilih <code>Security</code> and <code>Users -&amp;gt; User and Group Management</code></p>

<h3 id='5_konfigurasi_postfix'>5. Konfigurasi Postfix</h3>

<p>konfigurasi saya seperti ini:</p>

<pre><code>soft_bounce = no
queue_directory = /var/spool/postfix
command_directory = /usr/sbin
daemon_directory = /usr/lib/postfix
mail_owner = postfix
default_privs = nobody
inet_interfaces = all
unknown_local_recipient_reject_code = 450
debug_peer_level = 2
debugger_command =
    PATH=/bin:/usr/bin:/usr/local/bin:/usr/X11R6/bin
    xxgdb $daemon_directory/$process_name $process_id &amp; sleep 5
sendmail_path = /usr/sbin/sendmail
newaliases_path = /usr/bin/newaliases
mailq_path = /usr/bin/mailq
setgid_group = maildrop
manpage_directory = /usr/share/man
sample_directory = /usr/share/doc/packages/postfix/samples
readme_directory = /usr/share/doc/packages/postfix/README_FILES
mail_spool_directory = /var/mail
canonical_maps = hash:/etc/postfix/canonical
virtual_maps = hash:/etc/postfix/virtual
relocated_maps = hash:/etc/postfix/relocated
transport_maps = hash:/etc/postfix/transport
sender_canonical_maps = hash:/etc/postfix/sender_canonical
masquerade_exceptions = root
masquerade_classes = envelope_sender, header_sender, header_recipient
program_directory = /usr/lib/postfix
masquerade_domains =
mydestination = $myhostname, localhost.$mydomain
defer_transports =
disable_dns_lookups = no
relayhost =
content_filter =
mailbox_command =
mailbox_transport =
smtpd_sender_restrictions = hash:/etc/postfix/access
smtpd_client_restrictions =
smtpd_helo_required = no
smtpd_helo_restrictions =
strict_rfc821_envelopes = no
mynetworks_style = subnet
smtpd_recipient_restrictions = permit_mynetworks,permit_sasl_authenticated,reject_unauth_destination
#smtpd_recipient_restrictions = permit_sasl_authenticated,reject_unauth_destination
smtp_sasl_auth_enable = no
smtpd_sasl_auth_enable = yes
smtpd_use_tls = no
smtp_use_tls = no
alias_maps = hash:/etc/aliases
mailbox_size_limit = 0
message_size_limit = 10240000
#myhostname = linux.local
#change below information as needed
myhostname = alinux.web.id
mynetworks = 198.99.198.183, 127.0.0.1</code></pre>

<h3 id='6_konfigurasi_file_virtual'>6. Konfigurasi file virtual</h3>

<p>Tambahkan domain dan nama email na di <code>/etc/postfix/virtual</code></p>

<pre><code>alinux.web.id           virtual
deanet@alinux.web.id    deanet</code></pre>

<p>Jalankan perintah berikut:</p>

<pre><code># cd /etc/postfix
# postmap virtual
# postfix reload</code></pre>

<h3 id='7_auto_servis'>7. Auto servis</h3>

<p>untuk auto serpis biar dijalankan ketika pas reboot tambahkan di <code>/etc/init.d/boot.local</code></p>

<pre><code>/usr/sbin/saslauthd -a shadow
/usr/local/sbin/vm-pop3d -d</code></pre>

<h3 id='8_restart_smua_servis'>8. Restart smua servis</h3>

<pre><code>#postfix restart
#/usr/sbin/saslauthd -a shadow
#/usr/local/sbin/vm-pop3d -d</code></pre>

<h3 id='9_testing'>9. Testing</h3>

<p>utk testing kirim dengan menggunakan akun email lain ke nama email yang dibuat tadi. lalu cek di /var/mail/ . apakah ada mail utk user tadi :) . Untuk setting terima dan kirim menggunakan thunderbird seting sperti berikut:</p>

<h3 id='incoming'>INCOMING:</h3>

<p>server type: <code>POP3</code> server name: <code>alinux.web.id</code> port: <code>110</code> user: <code>deanet</code></p>

<h3 id='outgoing'>OUTGOING:</h3>

<p>server name: <code>alinux.web.id</code> port: <code>25</code></p>

<h2 id='imap'>IMAP</h2>

<p>Sekarang saya ingin agar ketika saya bepergian jauh, saya tetap bisa memakai email saya tersebut tanpa harus menyetting / membuat akun di thunderbird. Jawabannya adalah dengan menggunakan webmail. oleh karena itu kita butuh IMAP server dan Squirrelmail. untuk akses <code>IMAP</code> nya saya memakai <code>UW IMAP</code>, dan <code>Squirrelmail</code> sebagai webmail na.</p>

<p>Ok, langsung aj:</p>

<h3 id='1_install_uw_imap'>1. Install UW IMAP</h3>

<pre><code>#yast2 -i imap imap-lib</code></pre>

<h3 id='2_konfigurasi_imap_di_'>2. Konfigurasi imap di <code>/etc/xinetd.d/imap</code></h3>

<p>konfigurasi imap saya:</p>

<pre><code>#
# imap - pop2 mail daemon
#
service pop2
{
    	disable         = yes
        socket_type     = stream
        protocol        = tcp
    	wait            = no
        user            = root
        server          = /usr/sbin/ipop2d
        flags           = IPv4
}
#
# imap - pop3 mail daemon
#
service pop3
{
        disable         = yes
        socket_type     = stream
        protocol        = tcp
        wait            = no
        user            = root
    	server          = /usr/sbin/ipop3d
        flags           = IPv4
}
#
# imap - pop3 mail daemon over tls/ssl
#
service pop3s
{
    	disable         = yes
        socket_type     = stream
        protocol        = tcp
    	wait            = no
        user            = root
        server          = /usr/sbin/ipop3d
        flags           = IPv4
}
#
# imap - imap mail daemon
#
service imap
{
        disable         = no
        socket_type     = stream
        protocol        = tcp
        wait            = no
        user            = root
        server          = /usr/sbin/imapd
        flags           = IPv4
}
#
# imap - imap mail daemon over tls/ssl
#
service imaps
{
        disable         = yes
        socket_type     = stream
        protocol        = tcp
        wait            = no
        user            = root
    	server          = /usr/sbin/imapd
        flags           = IPv4
}</code></pre>

<p>Untuk memastikan bahwa imap running listen on inet ketik <code>netstat -ntlp</code> utk liat port na.</p>

<pre><code>Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 localhost:953           *:*                     LISTEN      -
tcp        0      0 *:smtp                  *:*                     LISTEN      -
tcp        0      0 *:mysql                 *:*                     LISTEN      -
tcp        0      0 *:pop3                  *:*                     LISTEN      -
tcp        0      0 *:imap                  *:*                     LISTEN      -
tcp        0      0 *:www-http              *:*                     LISTEN      -
tcp        0      0 mail.alinux.web.:domain *:*                     LISTEN      -
tcp        0      0 127.0.0.2:domain        *:*                     LISTEN      -
tcp        0      0 localhost:domain        *:*                     LISTEN      -
tcp        0      0 *:ftp                   *:*                     LISTEN      -
tcp        0      0 *:domain                *:*                     LISTEN      -
tcp        0      0 *:ssh                   *:*                     LISTEN      -</code></pre>

<h2 id='webmail'>WebMail</h2>

<h3 id='install_squirremail'>Install Squirremail</h3>

<p>prepare:</p>

<pre><code># mkdir /usr/local/squirrelmail
# cd /usr/local/squirrelmail
# mkdir data temp
# chgrp nogroup data temp
# chmod 0730 data temp</code></pre>

<p>Ekstrak paket:</p>

<pre><code># cd /usr/local/squirrelmail
# tar --bzip2 -xvf /usr/local/src/downloads/squirrelmail-1.4.17.tar.bz2
# mv squirrelmail-1.4.17 www</code></pre>

<p>Konfigruasi squirrel mail:</p>

<pre><code># cd /usr/local/squirrelmail
# www/configure</code></pre>

<p>Select the <code>&quot;D&quot;</code> option and then configure SquirrelMail with the <code>&quot;uw&quot;</code> preset. Also make sure to set the data and attachment directory settings <code>(&quot;/usr/local/squirrelmail/data&quot;</code> and <code>&quot;/usr/local/squirrelmail/temp&quot; respectively)</code> under <code>&quot;4. General Options&quot;</code>. Make any other changes as you see fit, select <code>&quot;S&quot;</code> to save and then <code>&quot;Q&quot;</code> to quit.</p>

<p>kalo sudah, konfigurasi virtual host biar kelola sub domain na enak. or klo gak langsung aj akses k <code>http://example.com/squirrelmail/src/configtest.php</code></p>

<p>konfigurasi virtual host saya:</p>

<pre><code>    Servername mail.alinux.web.id
    ServerAlias www.mail.alinux.web.id
#DocumentRoot &quot;/home/deanet/www/mail&quot;
    CustomLog &quot;/var/log/apache2/mail.access-log&quot; combined
    ErrorLog &quot;/var/log/apache2/mail.error-log&quot;
    HostnameLookups Off
    UseCanonicalname Off
    ServerSignature Off
    #
    #       Options All
    #       AllowOverride None
    #       Order allow,deny
    #       Allow from All
#
#Alias /s /usr/src/squirrelmail/www
DocumentRoot &quot;/usr/src/squirrelmail/www&quot;
&lt;directory /usr/src/squirrelmail/www&gt;
  Options None
  AllowOverride None
  DirectoryIndex index.php
  Order Allow,Deny
  Allow from all
&lt;/directory&gt;
&lt;directory /usr/src/squirrelmail/www/*&gt;
  Deny from all
&lt;/directory&gt;
&lt;directory /usr/src/squirrelmail/www/images&gt;
  Allow from all
&lt;/directory&gt;
&lt;directory /usr/src/squirrelmail/www/plugins&gt;
  Allow from all
&lt;/directory&gt;
&lt;directory /usr/src/squirrelmail/www/src&gt;
  Allow from all
&lt;/directory&gt;
&lt;directory /usr/src/squirrelmail/www/templates&gt;
  Allow from all
&lt;/directory&gt;
&lt;directory /usr/src/squirrelmail/www/themes&gt;
  Allow from all
&lt;/directory&gt;
&lt;directory /usr/src/squirrelmail/www/contrib&gt;
  Order Deny,Allow
  Deny from All
  Allow from 127
  Allow from 10
  Allow from 192
&lt;/directory&gt;
&lt;directory /usr/src/squirrelmail/www/doc&gt;
  Order Deny,Allow
  Deny from All
  Allow from 127
  Allow from 10
  Allow from 192
&lt;/directory&gt;</code></pre>

<p>Karena &#8221;<a href='http://squirrelmail.org/docs/admin/admin-10.html' target='_new'>uw-imapd server disables plain text logins by default in 2002 and newer versions</a>&#8221;, maka tambahkan set <code>disable-plaintext nil</code> di <code>/etc/c-client.cf</code> agar kita bisa mengakses imap server dengan squirrelmail.</p>

<p>konfigurasi saya:</p>

<pre><code>set rshpath /usr/bin/rsh
set sshpath /usr/bin/ssh
set disable-plaintext nil</code></pre>

<p>ude deh .. .selesai &#8230; huff &#8230;</p>

<p>gud lak &#8230; ;)</p>

<p>cmiiw :)</p>

<p>Thanks</p>

<p>Referensi:</p>

<ol>
<li><a href='http://forum.wowtutorial.org/index.php?showtopic=403'>forum.wowtutorial.org</a></li>

<li><a href='http://www.sonicresolutions.com/tech/howto_postfix_vmpop3d.html'>sonicresolutions.com</a></li>

<li><a href='http://flurdy.com/docs/postfix/#config-extra-webmail'>flurdy.com</a></li>

<li><a href='http://opensuse.or.id/panduan/server-setup/email-server/instalasi-mail-server-dengan-postfix-uw-imap/'>opensuse.or.id</a></li>

<li><a href='http://home.kivu.nl/imap_setup.html'>home.kivu.nl</a></li>

<li><a href='http://squirrelmail.org/docs/admin/admin-3.html'>Official Installation Guide on Squirrelmail</a></li>

<li><a href='http://squirrelmail.org/docs/admin/admin-10.html'>Official solving problems on Squirrelmail</a></li>

<li><a href='http://josh.staff.ugm.ac.id/seminar/Modul%20Mail%20Server%20with%20Postfix.pdf'>modul praktikum</a></li>
</ol></span>
</div>
<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>Jul 14 2010</span> &raquo; <a href="/2010/07/14/upgrade-clamav-di-debian-etch-dengan-backports.html">Upgrade ClamAV di Debian Etch dengan backports</a></li>
    
      <li><span>Jun 30 2010</span> &raquo; <a href="/2010/06/30/installasi-qmail-vpopmail-clamav-simscan-dengan-spamassasin-di-debian-etch.html">Installasi Qmail, Vpopmail, ClamAV, Simscan, Spamassasin di Debian Etch</a></li>
    
      <li><span>Jun 23 2010</span> &raquo; <a href="/2010/06/23/mengatasi-no-public-key-available-di-apt-debian.html">Mengatasi no public key available di apt debian</a></li>
    
  </ul>
</div>

<h3 id="archive"><a href="/archive.html">Archive</a></h3>
<br/>
<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread]
    */
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://buildsystem.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=buildsystem">comments powered by Disqus.</a></noscript>

		</div>
	</div>
	<div id="footer">
		<div id="leftcol">
maintenance and developed by <a href="http://deanet.web.id" target="_new">deanet.web.id</a>
</div>

	</div>
</div>
<script type="text/javascript">
//<![CDATA[
(function() {
	var links = document.getElementsByTagName('a');
	var query = '?';
	for(var i = 0; i < links.length; i++) {
	if(links[i].href.indexOf('#disqus_thread') >= 0) {
		query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
	}
	}
	document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/buildsystem/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>
</body>

</html>
