<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>Installasi BIND, Apache2, Mysql, PHP dan Konfigurasi DNS serta Virtual Host di OpenSuse &laquo; alinux.web.id</title>
	<meta name="author" content="deanet">
	<link href="atom.xml" rel="alternate" title="build system from God's systems" type="application/atom+xml" />
	<link rel="stylesheet" href="/css/site.css" type="text/css" media="screen, projection" />
	<link rel="stylesheet" href="/css/syntax.css" type="text/css" />
	<meta name="viewport" content="width=850" />
	<link rel="stylesheet" media="screen and (max-device-width: 480px)" href="/css/iphone.css" type="text/css" />

<script type="text/javascript" src="http://use.typekit.com/aoe6dic.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-12495571-3']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<script type="text/javascript">
        var disqus_awesome = true; 
        var disqus_developer = true;
</script>    
</head>

<body>
<div id="container">
	<div id="header">
		<div id="logo">
	<a class="site" href="/index.html">home</a>
</div>
<div id="navbar">
	<a class="site" href="/atom.xml">rss</a>
</div>

	</div>
	<div id="page">
		<div id="content">
		<div id="post" class="post">
	<span class="title">Installasi BIND, Apache2, Mysql, PHP dan Konfigurasi DNS serta Virtual Host di OpenSuse</span><br />
	<span class="date">May 05 2009</span><br />
	<span class="content"><h2 id='bind__dns_server'>BIND - DNS Server</h2>

<p>cek bind nya sudah ada apa belum:</p>

<pre><code>#rpm -qa|grep bind</code></pre>

<p>jika bind na lum ada ketik:</p>

<pre><code>#yast2 -i bind</code></pre>

<h3 id='konfigurasi_dns'>Konfigurasi DNS:</h3>

<p>pastikan <code>/etc/resolv.conf</code> terisi ip dari <code>nameserver</code> km. misal</p>

<pre><code>nameserver xxx.99.198.183</code></pre>

<p>selanjutnya tambahkan pada file <code>/etc/named.conf</code> seperti berikut:</p>

<pre><code>zone &quot;domain.com&quot; IN {
    type master;
    file &quot;/var/lib/named/domain.com.zone&quot;;
    allow-update {none;};
};
zone &quot;198.99.198.183.in-addr.arpa&quot; IN {
    type master;
    file &quot;/var/lib/named/198.99.xxx.rev&quot;;
    allow-update {none;};
};</code></pre>

<p>buat file domain.com.zone di <code>/var/lib/named</code> yang isinya:</p>

<pre><code>@       IN      SOA     ns1.domain.com. domain.com (
                    200903203
                    10800
                    3600
                    604800
                    3600 ) ;

    IN     NS      ns1.domain.com.
    IN     NS      ns2.domain.com.
    IN      A       xxx.99.198.183
ns1   IN      A       xxx.99.198.183
ns2   IN      A       xxx.99.198.183
www IN      A       xxx.99.198.183</code></pre>

<p>selanjutnya file <code>198.99.xxx.rev</code> di folder <code>/var/lib/named</code> yang isinya:</p>

<pre><code>$TTL    14400
@       86400   IN      SOA     ns1.domain.com. domain.com (
            2009021501
            86400
            7200
            3600000
            86400 );
IN NS ns1.domain.com
1 IN PTR ns1.domain.com
2 IN PTR www.domain.com

$TTL    1440
@       86400   IN      SOA     ns2.domain.com. domain.com (
            2010021501
            86400
            7200
            3600000
            86400 );
IN      NS              ns2.domain.com
1       IN      PTR     ns2.domain.com
2       IN      PTR     www.domain.com</code></pre>

<p>oke, untuk dns sudah. 2 file <code>zone</code> dan <code>reverse</code> adalah file yang paling penting. Untuk mengetest apakah sudah benar apa belum konfigurasinya bsa menggunakan nslookup ato dig. eitsss.. pastikan daemon bind na uda jalan.</p>

<h3 id='cek_status_daemon_dns_server'>cek status daemon dns server:</h3>

<pre><code>#rcnamed status</code></pre>

<p>untuk menjalankan ketik:</p>

<pre><code>#rcnamed start</code></pre>

<p>untuk test dns domain <code>domain.com</code> :</p>

<pre><code>#dig domain.com

; &lt;&lt;&gt;&gt; DiG 9.4.2-P1 &lt;&lt;&gt;&gt; domain.com
;; global options:  printcmd
;; Got answer:
;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 41519
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 2, ADDITIONAL: 2
;; QUESTION SECTION:
;domain.com.                 IN      A
;; ANSWER SECTION:
domain.com.          3600    IN      A       xxx.99.198.183
;; AUTHORITY SECTION:
domain.com.          3600    IN      NS      ns2.domain.com.
domain.com.          3600    IN      NS      ns1.domain.com.
;; ADDITIONAL SECTION:
ns1.domain.com.      3600    IN      A       xxx.99.198.183
ns2.domain.com.      3600    IN      A       xxx.99.198.183
;; Query time: 1 msec
;; SERVER: xxx.99.198.183#53(xxx.99.198.183)
;; WHEN: Tue May  5 14:01:58 2009
;; MSG SIZE  rcvd: 115</code></pre>

<p>ato dg <code>nslookup</code></p>

<pre><code>nslookup
&gt; set type=all
&gt; domain.com
Server:  ns1.dtp.net.id
Address:  xxx.43.160.50
Non-authoritative answer:
domain.com   internet address = xxx.99.198.183
domain.com
    primary name server = ns1.domain.com
    serial  = 200903203
    refresh = 10800 (3 hours)
    retry   = 3600 (1 hour)
    expire  = 604800 (7 days)
    default TTL = 3600 (1 hour)
domain.com   nameserver = ns1.domain.com
domain.com   nameserver = ns2.domain.com
domain.com   nameserver = ns2.domain.com
domain.com   nameserver = ns1.domain.com
domain.com   internet address = xxx.99.198.183</code></pre>

<p>okeh&#8230; jika uda ada result berarti uda bs jalan. klo eror y dicoba maning, n itu baru dns nya ajah :D, lum install apache. setting vhostna dll.</p>

<h2 id='apache'>Apache</h2>

<h3 id='installasi_apache'>Installasi apache:</h3>

<pre><code>#yast -i apache2</code></pre>

<p>lihat status apache uda jalan lum:</p>

<pre><code>#rcapache2 status</code></pre>

<p>klo belum jalankan:</p>

<pre><code>#rcapache2 start</code></pre>

<h3 id='installasi_php'>Installasi PHP</h3>

<pre><code>#yast -i php5 php5-mysql apache2-mod_php5</code></pre>

<p>untuk lihat modul apache yang sudah jalan apa aj ketik:</p>

<pre><code>#a2enmod -l</code></pre>

<p>jika lum ada php5 yang terload ketik:</p>

<pre><code>#a2enmod php5</code></pre>

<p>lalu restart modul apache na:</p>

<pre><code>#rcapache2 restart</code></pre>

<p>bisa di test dengan skrip php</p>

<h2 id='mysql'>MySQL:</h2>

<p>untuk installasi ketik:</p>

<pre><code>#yast -i mysql</code></pre>

<p>lalu jalankan daemon mysql</p>

<pre><code>#rcmysql start</code></pre>

<p>ganti password mysql</p>

<pre><code>#mysqladmin -u root -p passwordbaru</code></pre>

<p>okeh, sampe saat ini sudah ada apache,mysql,php ama dns serper. untuk ngecek apakah daemonna jalan, scan aj pake nmap.</p>

<pre><code>#nmap localhost
Starting Nmap 4.60 ( http://nmap.org ) at 2009-05-05 14:30 UTC
Warning: Hostname localhost resolves to 2 IPs. Using 127.0.0.1.
Interesting ports on localhost.localdomain (127.0.0.1):
Not shown: 1705 closed ports
PORT     STATE SERVICE
21/tcp   open  ftp
53/tcp   open  domain
80/tcp   open  http
3306/tcp open  mysql
Nmap done: 1 IP address (1 host up) scanned in 0.495 seconds</code></pre>

<p>klo nmap belum ada install dolo lah :D . pake yast -i nmap</p>

<h2 id='virtual_host'>Virtual Host</h2>

<p>nah, akhirnya sampek jugak ke virtual host. ni yang bkin puyeng cos ngutek2 dari pagi sampek sore ndak isa2. weleh2. ternyata naruh nya salah. okeh.</p>

<h3 id='kasus'>Kasus:</h3>

<p>Virtual Host yang aq pake sekarang adalah untuk bkin 2 subdomain dan 1 root domain.</p>

<h3 id='pemecahan'>Pemecahan:</h3>

<p>hanya dibutuhkan 1 file <code>zone</code> dan 1 file <code>reverse</code>. Jadi setiap subdomain ditambahkan dalam <code>zone</code> root domain, tidak berdiri dalam file sndiri. bisa sih berdiri diri sendiri, tapi agak rumit or gimna kata <a href='http://wowtutorial.org'>org</a> yang mengajariku :D . bagaimna jika ada root domain lain ?? jawabnnya maka baru dibuat 1 file <code>zone</code> lagi.</p>

<p>oke, daripada ngomong ngalor ngidul gak karuan. skrg ke <code>POC</code> na aj:</p>

<p>tambahkan pada file <code>/var/lib/named/198.99.208.rev</code> seperti berikut</p>

<pre><code>$TTL 86400
@       IN      SOA     sub1.domain.com.   sub1.domain.com (
                    100
                    1H
                    1M
                    1W
                    1D );
@       IN      NS      ns1.domain.com
@       IN      NS      ns2.domain.com

$TTL 86400
@       IN      SOA     sub2.domain.com.   sub2.domain.com (
                    100
                    1H
                    1M
                    1W
                    1D );
@       IN      NS      ns1.domain.com
@       IN      NS      ns2.domain.com</code></pre>

<p>terus pada file <code>domain.com.zone</code> tambahkan:</p>

<pre><code>sub1  IN      A       xxx.99.198.183
sub2  IN      A       xxx.99.198.183</code></pre>

<p>selesai :mrgreen: . mudahkan &#8230; heheheeh .. cmn nambahin d <code>reverse</code> na sama 2 baris seuprit di <code>zone</code> na &#8230;</p>

<p>eitssss&#8230; skrg kita konfig virtual hostna di open suse, file <code>/etc/apache2/httpd.conf</code> nya menginclude file <code>default-server.conf</code>. di file <code>default-server.conf</code> , konfigruasi root directory di set di situ. untuk vhost na di set di <code>conf.d/*.conf</code> yang terinisialisasi di file <code>httpd.conf</code> na. jadi disable aj di <code>httpd.conf</code> pada bagian:</p>

<pre><code>#Include /etc/apache2/vhosts.d/*.conf</code></pre>

<p>selanjutnya kita akan mengkonfigurasi langsung di file <code>default-server.conf</code>. so gak perlu repot2 buka2 file. ckup satu file aj :) . Yang perlu diperhatikan adalah ketika menmbhkan vhost utk subdomain, maka root domain juga mesti ditambahkan. oke. kira2 konfigna sperti ini:</p>

<p>kalo uda mantep restart apache na :)</p>

<p>jangan lupa pastikan konfigruasi file <code>/etc/hosts</code> ditambahkan :</p>

<pre><code>xxx.99.198.183  sub1.domain.com sub2.domain.com domain.com</code></pre>

<p>restart networkna:</p>

<pre><code>#rcnetwork restart</code></pre>

<p>n pastikan kondisi nameserver pada file <code>/etc/apache2/listen.conf</code> keadaaan uncomment</p>

<pre><code>#NameVirtualHost *:80</code></pre>

<p>lalu coba akses ke domain, subdomainnya juga. Jika masih gagal terus&#8230; yaaa .. dicoba kembali .. sampek bisa.</p>

<p>huff&#8230; akhirna slesai jugakk, never stop to learn n try &#8230;. gud lak&#8230; ;)</p>

<p>cmiiw</p>

<p>referensi:</p>

<ol>
<li><a href='http://www.susegeek.com/internet-browser/install-configure-lamp-apachemysqlphp-in-opensuse-110/'>susegeek.com</a></li>

<li><a href='http://www.xenocafe.com/tutorials/dns_linux/redhat/dns_linux_redhat-part1.php'>www.xenocafe.com</a></li>

<li><a href='http://www.devhood.com/tutorials/tutorial_details.aspx?tutorial_id=731'>www.devhood.com</a></li>

<li><a href='http://content.websitegear.com/article/domain_setup.htm'>content.websitegear.com</a></li>

<li><a href='http://httpd.apache.org/docs/2.0/vhosts/examples.html'>httpd.apache.org</a></li>
</ol></span>
</div>
<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>Jul 14 2010</span> &raquo; <a href="/2010/07/14/upgrade-clamav-di-debian-etch-dengan-backports.html">Upgrade ClamAV di Debian Etch dengan backports</a></li>
    
      <li><span>Jun 30 2010</span> &raquo; <a href="/2010/06/30/installasi-qmail-vpopmail-clamav-simscan-dengan-spamassasin-di-debian-etch.html">Installasi Qmail, Vpopmail, ClamAV, Simscan, Spamassasin di Debian Etch</a></li>
    
      <li><span>Jun 23 2010</span> &raquo; <a href="/2010/06/23/mengatasi-no-public-key-available-di-apt-debian.html">Mengatasi no public key available di apt debian</a></li>
    
  </ul>
</div>

<h3 id="archive"><a href="/archive.html">Archive</a></h3>
<br/>
<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread]
    */
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://buildsystem.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=buildsystem">comments powered by Disqus.</a></noscript>

		</div>
	</div>
	<div id="footer">
		<div id="leftcol">
maintenance and developed by <a href="http://deanet.web.id" target="_new">deanet.web.id</a>
</div>

	</div>
</div>
<script type="text/javascript">
//<![CDATA[
(function() {
	var links = document.getElementsByTagName('a');
	var query = '?';
	for(var i = 0; i < links.length; i++) {
	if(links[i].href.indexOf('#disqus_thread') >= 0) {
		query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
	}
	}
	document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/buildsystem/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>
</body>

</html>
