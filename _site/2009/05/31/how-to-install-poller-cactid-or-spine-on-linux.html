<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>How to install poller cactid or spine on linux &laquo; dhatNyeng</title>
	<meta name="author" content="deanet">
	<link href="atom.xml" rel="alternate" title="build system from God's systems" type="application/atom+xml" />
	<link rel="stylesheet" href="/css/site.css" type="text/css" media="screen, projection" />
	<link rel="stylesheet" href="/css/syntax.css" type="text/css" />
	<meta name="viewport" content="width=850" />
	<link rel="stylesheet" media="screen and (max-device-width: 480px)" href="/css/iphone.css" type="text/css" />

<script type="text/javascript" src="http://use.typekit.com/aoe6dic.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>

	
	<script type="text/javascript">
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', '']);
	  _gaq.push(['_trackPageview']);
	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
	  })();
	</script>

<script type="text/javascript">
        var disqus_awesome = true; 
        var disqus_developer = true;
</script>    
</head>

<body>
<div id="container">
	<div id="header">
		<div id="logo">
<img src="/images/ashr.gif"><br/>
	<a class="site" href="/index.html">dhatNyeng</a>
</div>
<div id="navbar">
        <a href="/atom.xml"><img src="/images/bt-rss.gif" alt="Subscribe to RSS Feed" border="0" /></a>
                <a href="http://github.com/alinuxwebid/"><img src="/images/smartgit.png" alt="github.com/alinux" border="0" /></a>
</div>

	</div>
	<div id="page">
		<div id="content">
		<div id="post" class="post">
	<span class="title">How to install poller cactid or spine on linux</span><br />
	<span class="date">May 31 2009</span><br />
	<span class="content"><hr />
<h2 id='spine_a_backend_data_gatherer_for_cacti'>spine: a backend data gatherer for cacti</h2>

<p>This code represents high speed poller replacement for cmd.php. It has come quite a ways from it&#8217;s initial development. It is 100% compatible with the legacy cmd.php processor. (Larry Adams aka TheWitness)</p>

<h2 id='prepare'>Prepare:</h2>

<h4 id='1_make_sure_netsnmpdevel_package_have_been_installed_on_your_machine'>1. Make sure net-snmp-devel package have been installed on your machine.</h4>

<pre><code># rpm -qa | grep snmp</code></pre>

<p>on my machine results:</p>

<pre><code>net-snmp-5.4.1-77.4
snmp-mibs-5.4.1-77.4
libsnmp15-5.4.1-77.4
php5-snmp-5.2.9-0.1
net-snmp-devel-5.4.1-77.4</code></pre>

<p>if you dont have anything of package, install using <code>yast</code>. yeah, i&#8217;m using rh based / opensuse 11.</p>

<pre><code># yast2 -i net-snmp</code></pre>

<h4 id='2_get_package_from_'>2. Get package from <a href='http://www.cacti.net/downloads/spine' target='_blank'>www.cacti.net</a></h4>

<pre><code># cd /usr/src
# wget http://www.cacti.net/downloads/spine/cacti-spine-0.8.7c.tar.gz</code></pre>

<h2 id='installation_spine'>Installation spine:</h2>

<h4 id='1_extract_package'>1. extract package</h4>

<pre><code># tar -xzvf cacti-spine-0.8.7c.tar.gz</code></pre>

<h4 id='2_configure_make_and_make_install_'>2. Configure, make and make install :)</h4>

<pre><code># cd cacti-spine-0.8.7c
# ./configure &amp;&amp; make &amp;&amp; make install</code></pre>

<h2 id='configuring_spine'>Configuring spine:</h2>

<h4 id='0_copying_spineconf_and_configuring_it'>0. Copying spine.conf and configuring it</h4>

<pre><code># cd /usr/local/spine/etc
# cp spine.conf.dist spine.conf

# vi spine.conf
DB_Host         localhost
DB_Database     cacti
DB_User         cactiuser
DB_Pass         cactipassword
DB_Port         3306</code></pre>

<h4 id='1_set_crontab_time_for_1_minutes'>1. Set crontab time for 1 minutes</h4>

<pre><code>* * * * * /usr/bin/php /srv/www/htdocs/cacti/poller.php &gt; /dev/null 2&gt;&amp;1</code></pre>

<h4 id='2_change_poller_configuration_on_cactistrong'>2. Change poller configuration on cacti&lt;/strong&gt;</h4>

<h5 id='a_fill_path_spine'>a. Fill path spine</h5>

<p>click settings -&#62; Path . u will see like this:</p>
<img src='http://numpanglewat.files.wordpress.com/2009/05/pathspine.png?w=300&h=36' border='0' />
<p>then click save</p>

<p>b. change poller configuration</p>

<p>click settings -&#62; Poller . u will see like this:</p>
<img src='http://numpanglewat.files.wordpress.com/2009/05/pollerspine.png?w=300&h=91' border='0' />
<p>then click save</p>

<h4 id='others_configuration'>others configuration:</h4>

<h5 id='1_update_value_of_poller_on_database'>1. Update value of poller on database</h5>

<p>default value of poller on cacti database are <code>300 seconds</code>. We can change that value via <code>mysql console</code></p>

<pre><code># mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 28894
Server version: 5.0.77-community MySQL Community Edition (GPL)
Type &#39;help;&#39; or &#39;\h&#39; for help. Type &#39;\c&#39; to clear the buffer.</code></pre>

<p>change into cacti database</p>

<pre><code>mysql&gt; use cacti;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A
Database changed</code></pre>

<p>and update value of poller on database.</p>

<pre><code>mysql&gt; update data_template_data set rrd_step=&#39;60&#39;;
mysql&gt; update data_template_rrd set rrd_heartbeat=&#39;120&#39;;
mysql&gt; flush privileges;</code></pre>

<h5 id='2_remove_rra_data_on_rra_directorystrong'>2. Remove rra data on rra directory.&lt;/strong&gt;</h5>

<p>Remove <code>old rra</code> data that does not confuse with the new data of <code>spine poller</code>. Backup first if u not sure what r u doing.</p>

<pre><code># cd /srv/www/htdocs/cacti/rra
# tar -czvf /srv/www/htdocs/backup-rra.tar.gz *</code></pre>

<p>then u can remove rra data</p>

<pre><code># rm *</code></pre>

<p>Finish..</p>

<p>check your log to make sure spine is running .. ;)</p>
<img src='http://numpanglewat.files.wordpress.com/2009/05/log.png?w=300&h=51' border='0' />
<h2 id='troubleshooting'>Troubleshooting:</h2>

<p>if u got error like below when using spine version cacti-spine-0.8.7/a/c</p>

<pre><code>configure: error:


*** [Gentoo] sanity check failed! ***
*** libtool.m4 and ltmain.sh have a version mismatch! ***
*** (libtool.m4 = 1.5.22, ltmain.sh = 1.5.26) ***</code></pre>

<p>try using spine version 7c beta 2 on <a href='http://forums.cacti.net/about29486.html' target='_new'>this page</a></p>

<p>gud luck ;)</p>

<p>Reference:</p>

<ol>
<li><a href='http://www.cacti.net/spine_install_rhlnx.php'>cacti.net</a></li>

<li><a href='http://human.network.web.id/2008/07/02/cacti-1-minute-polling/'>human.network.web.id</a></li>

<li><a href='http://forums.cacti.net/about29486.html'>forum cacti</a></li>
</ol></span>
</div>
<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
      <li><span>Jun 30 2010</span> &raquo; <a href="/2010/06/30/installasi-qmail-vpopmail-clamav-simscan-dengan-spamassasin-di-debian-etch.html">Installasi Qmail, Vpopmail, ClamAV, Simscan, Spamassasin di Debian Etch</a></li>
    
      <li><span>Jun 23 2010</span> &raquo; <a href="/2010/06/23/mengatasi-no-public-key-available-di-apt-debian.html">Mengatasi no public key available di apt debian</a></li>
    
      <li><span>Jun 15 2010</span> &raquo; <a href="/2010/06/15/compile-kernel-vs-patch-kernel-on-gnu-linux.html">Compile Kernel VS Patch Kernel on Gnu/Linux</a></li>
    
  </ul>
</div>

<h3 id="archive"><a href="/archive.html">Archive</a></h3>
<br/>
<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread]
    */
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://buildsystem.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=buildsystem">comments powered by Disqus.</a></noscript>

		</div>
	</div>
	<div id="footer">
		<div id="leftcol">
Powered by <a href="http://jekyllrb.com" target="_new">Jekyll</a> and <a href="/credits.html">credits</a>, running on <a href="http://tor.hu" target="_new">Tor Gigabit Connection</a>
</div>
<div id="rightcol">
<a href="/about.html">about</a>
</div>

	</div>
</div>
<script type="text/javascript">
//<![CDATA[
(function() {
	var links = document.getElementsByTagName('a');
	var query = '?';
	for(var i = 0; i < links.length; i++) {
	if(links[i].href.indexOf('#disqus_thread') >= 0) {
		query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
	}
	}
	document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/buildsystem/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
</script>
</body>

</html>
