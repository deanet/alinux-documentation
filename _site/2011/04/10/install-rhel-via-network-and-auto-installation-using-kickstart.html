<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta http-equiv="Content-Language" content="en"/>
    <title>Install RHEL via Network and Auto Installation using Kickstart</title>
    <link rel="stylesheet" href="/style.css" type="text/css" media="screen"/>
    <link rel="stylesheet" href="/syntax.css" type="text/css" media="screen"/>
</head>

<script type="text/javascript">
        var disqus_awesome = ; 
        var disqus_developer = ;
</script>    

<body>
    <div class="outercolumn">
        <div class="topbar">
            <a href="/index.html">Home</a> - <a href="/archives/index.html">archive</a>
        </div>

        <div class="column">
            <div class="content">
                

<div class="title">
    Install RHEL via Network and Auto Installation using Kickstart
</div>

<div class="date">
<!--    

    published: 10 Apr 2011,
    in category: <a href="/archives/installRHELNetworkKickstart.html">installRHELNetworkKickstart</a>
-->
    in category: 
<a rel="tag" href="/archives/install.html">install</a>, 

<a rel="tag" href="/archives/RHEL.html">RHEL</a>, 

<a rel="tag" href="/archives/Network.html">Network</a>, 

<a rel="tag" href="/archives/Kickstart.html">Kickstart</a>, 



</div>

<div class="innercontent">
    <h3 id='_preparing'>. Preparing</h3>
<div class='highlight'><pre><code class='xml'>[root@utcepos4 ~]# cp /usr/lib/syslinux/pxelinux.0 /tftpboot/linux-install/pxelinux.0
[root@utcepos4 ~]# cd /mnt/iso/images/pxeboot/
[root@utcepos4 pxeboot]# ls
initrd.img  README  TRANS.TBL  vmlinuz
[root@utcepos4 pxeboot]# cp * /tftpboot/linux-install/images/
[root@utcepos4 pxeboot]# ls /tftpboot/linux-install/images/
initrd.img  README  TRANS.TBL  vmlinuz
[root@utcepos4 pxeboot]# 
</code></pre>
</div>
<h3 id='_configure'>. Configure</h3>
<div class='highlight'><pre><code class='xml'>[root@utcepos4 pxeboot]# cd /tftpboot/
[root@utcepos4 tftpboot]# cat ./linux-install/pxelinux.cfg/default
default local
timeout 100
prompt 1
display msgs/boot.msg
F1 msgs/boot.msg
F2 msgs/general.msg
F3 msgs/expert.msg
F4 msgs/param.msg
F5 msgs/rescue.msg
F7 msgs/snake.msg


label 0
localboot 1


default linux
timeout 100

label linux
kernel images/vmlinuz
append initrd=images/initrd.img ramdisk_size=9216 noapic acpi=off
</code></pre>
</div>
<h3 id='_set_dhcp'>. Set DHCP</h3>
<div class='highlight'><pre><code class='xml'>[root@eptcproc5 tftpboot]# cat /etc/dhcpd.conf
ddns-update-style ad-hoc;

deny unknown-clients;
not authoritative;

option domain-name              &quot;eptcproc5&quot;;
#option domain-name-servers      ???.???.???.???, ???.???.???.???;
option subnet-mask              255.255.255.0;

allow bootp;
allow booting;

option ip-forwarding    false;  # No IP forwarding
option mask-supplier    false;  # Don&#39;t respond to ICMP Mask req

subnet 192.168.2.0 netmask 255.255.255.0 {
  #option routers        192.168.2.11;
}

group {
  next-server 192.168.2.15;          # name of your TFTP server
  filename &quot;linux-install/pxelinux.0&quot;;        # name of the bootloader program

## host client yang akan diinstall
  host eptcproc4 {
        hardware ethernet e4:1f:13:39:ee:58;
        fixed-address 192.168.2.40;
  }

  host epos4 {
        hardware ethernet  e4:1f:13:79:eb:30;
        fixed-address 192.168.2.41;
}
 host eptcproc8 {
        hardware ethernet  e4:1f:13:1a:c9:d4;
        fixed-address 192.168.2.42;
}

}
</code></pre>
</div>
<h3 id='_enable_tftp_boot'>. Enable tftp boot</h3>
<div class='highlight'><pre><code class='xml'>[root@eptcproc5 tftpboot]# chkconfig tftp on
[root@eptcproc5 ~]# chkconfig --list tftp
tftp            on
[root@eptcproc5 ~]# 
</code></pre>
</div>
<p>make sure:</p>
<div class='highlight'><pre><code class='xml'>[root@eptcproc5 tftpboot]# cat /etc/xinetd.d/tftp
# default: off
# description: The tftp server serves files using the trivial file transfer \
#       protocol.  The tftp protocol is often used to boot diskless \
#       workstations, download configuration files to network-aware printers, \
#       and to start the installation process for some operating systems.
service tftp
{
        disable = no
        socket_type             = dgram
        protocol                = udp
        wait                    = yes
        user                    = root
        server                  = /usr/sbin/in.tftpd
        server_args             = -s /tftpboot
        per_source              = 11
        cps                     = 100 2
        flags                   = IPv4
}
</code></pre>
</div>
<h3 id='_start_dhcp_and_restart_xinetd'>. start DHCP and restart Xinetd</h3>
<div class='highlight'><pre><code class='xml'>[root@eptcproc5 ~]# service dhcpd restart
Shutting down dhcpd:                                       [  OK  ]
Starting dhcpd:                                            [  OK  ]
[root@eptcproc5 ~]# service xinetd restart
Stopping xinetd:                                           [  OK  ]
Starting xinetd:                                           [  OK  ]
[root@eptcproc5 ~]# 
</code></pre>
</div>
<p>touch sample</p>
<div class='highlight'><pre><code class='xml'>[root@eptcproc5 tftpboot]# ls / &gt; /tftpboot/test
</code></pre>
</div>
<h3 id='_test_from_other_machine'>. Test from other machine:</h3>
<div class='highlight'><pre><code class='xml'>[root@eptcproc6 ~]# tftp -v eptcproc5
Connected to eptcproc5 (192.168.2.15), port 69
tftp&gt; get test
getting from eptcproc5:test to test [netascii]
Received 216 bytes in 0.6 seconds [3014 bit/s]
tftp&gt; quit
[root@eptcproc6 ~]# 
</code></pre>
</div>
<p>It;s work, now autostart installation with kickstart: when boot type:</p>
<div class='highlight'><pre><code class='xml'>1. linux ks=nfs:ip_server:/path/nama_file.ks
</code></pre>
</div>
<p>for NFS</p>
<div class='highlight'><pre><code class='xml'>2. linux ks=http:ip_server:/path/nama_file.ks
</code></pre>
</div>
<p>for http</p>
<div class='highlight'><pre><code class='xml'>3. linux ks=nfs:ip_server:/path/nama_file.ks
</code></pre>
</div>
<p>example of dot.ks (http://10.80.120.77/anaconda-ks.cfg) .</p>
<div class='highlight'><pre><code class='xml'># Kickstart file automatically generated by anaconda.
install
##NFS diset dulu di server 10.80.120.77/192.168.1.111 (contoh)
nfs --server=192.168.1.111 --dir=/mnt/iso/


key --skip
lang en_US.UTF-8
keyboard us
xconfig --startxonboot

#ip bisa diset disini
#network --device eth0 --bootproto static --ip 192.168.1.3 --netmask 255.255.255.0 --hostname utcadv3
#network --device eth1 --onboot no --bootproto dhcp --hostname utcadv3
network --device eth0 --onboot no --bootproto dhcp --hostname utcadv
rootpw --iscrypted $1$iUvlkRqn$nCMWCbazajhv0LKnAJ3QU.
firewall --enabled --port=22:tcp
authconfig --enableshadow --enablemd5
selinux --enforcing
timezone Asia/Jakarta
bootloader --location=mbr --driveorder=sda --append=&quot;noapic acpi=off rhgb quiet&quot;
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work

##drive sda atau sdb atau sdc
clearpart --linux --drives=sda
part /boot --fstype ext3 --size=100
part /home --fstype ext3 --size=30000
part / --fstype ext3 --size=20000
part swap --size=8000
part /apps --fstype ext3 --size=100 --grow


##konfigurasi diatas untuk hardisk 146GB
##harap diperhatikan agar hardisk yang akan diinstall sama atau lebih besar.

## hasilnya berikut:
##[root@utcadv3 ~]# fdisk -l

##Disk /dev/sda: 146.8 GB, 146814976000 bytes
##255 heads, 63 sectors/track, 17849 cylinders
##Units = cylinders of 16065 * 512 = 8225280 bytes

##   Device Boot      Start         End      Blocks   Id  System
##/dev/sda1   *           1          13      104391   83  Linux
##/dev/sda2              14        3837    30716280   83  Linux
##/dev/sda3            3838        6387    20482875   83  Linux
##/dev/sda4            6388       17849    92068515    5  Extended
##/dev/sda5            6388        7407     8193118+  82  Linux swap / Solaris
##/dev/sda6            7408       17849    83875333+  83  Linux
##[root@utcadv3 ~]# df -h
##Filesystem            Size  Used Avail Use% Mounted on
##/dev/sda3              19G  2.6G   16G  15% /
##/dev/sda6              78G  184M   74G   1% /apps
##/dev/sda1              99M   12M   83M  13% /boot
##tmpfs                 2.0G     0  2.0G   0% /dev/shm
##eptcadv1:/home/pgadmin
                       30G  7.3G   21G  26% /home/pgadmin
##[root@utcadv3 ~]# 


##Grup paket yang akan diinstall
%packages
@admin-tools
@base
@core
@dialup
@editors
@gnome-desktop
@games
@graphical-internet
@graphics
@java
@kde-desktop
@legacy-software-support
@office
@printing
@sound-and-video
@text-internet
@base-x
kexec-tools
fipscheck
device-mapper-multipath
sgpio
emacs
libsane-hpaio
xorg-x11-utils
xorg-x11-server-Xnest
</code></pre>
</div>
<p>done :)</p>

<p>reference:</p>

<ol>
<li><a href='http://mohammadthalif.wordpress.com/2010/03/05/installing-and-testing-tftpd-in-ubuntudebian/'>http://mohammadthalif.wordpress.com/2010/03/05/installing-and-testing-tftpd-in-ubuntudebian/</a></li>
</ol>
</div>



<div id="disqus_thread"></div>

<script type="text/javascript" src="http://disqus.com/forums/buildsystem/embed.js">
</script>

<noscript>
    <p> <a href="http://nebansnotebook.disqus.com/?url=ref">View the discussion thread. </a> </p>
</noscript>



<div class="prevnext">
    
        <div class="prev">
            &laquo; <a href="/2011/03/04/create-own-repo-rhel-6.0-beta-from-iso.html"> create own repo RHEL 6.0 beta from ISO </a>
        </div>
    

    
        <div class="next">
            <a href="/2011/04/16/how-to-knowing-sas-hba-on-ibm-blade-hs21-or-hs22.html"> how to knowing sas hba on IBM Blade HS21 or HS22 </a> &raquo;
        </div>
    
</div>




            </div>
            
<div class="footer">
   <center>
	<small>alinux.web.id, established since 2007, hosted by <a target="_new" href="http://tor.hu">tor.hu</a>, powered by <a target="_new" href="http://www.vim.org">vim</a> and <a target="_new" href="http://jekyllrb.com">jekyll</a><br/>
<a target="_new" href="https://github.com/deanet/alinux-documentation">source</a>
</small>
	</center>
</div>

            <div class="pageend"></div>
        </div>
    </div>
</body>
</html>

